<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Mr. Bear&#39;s home</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="blog.polarbearmaster.com/"/>
  <updated>2017-06-18T06:36:17.000Z</updated>
  <id>blog.polarbearmaster.com/</id>
  
  <author>
    <name>Bear</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>è¿˜åŸï¼šå¾®ä¿¡çº¢åŒ…çš„èƒŒå</title>
    <link href="blog.polarbearmaster.com/2017/06/14/%E5%BE%AE%E4%BF%A1%E6%8A%A2%E7%BA%A2%E5%8C%85/"/>
    <id>blog.polarbearmaster.com/2017/06/14/å¾®ä¿¡æŠ¢çº¢åŒ…/</id>
    <published>2017-06-14T12:33:59.000Z</published>
    <updated>2017-06-18T06:36:17.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://wx3.sinaimg.cn/mw690/bd582863gy1fgndjkz8l8j20bo08sglu.jpg" alt="å¾®ä¿¡çº¢åŒ…"></p>
<blockquote>
<p>ä½œä¸ºä¸€æš iOS ç¨‹åºçŒ¿ï¼Œå¹³å¸¸çš„ App å·²è¶Šæ¥è¶Šä¸èƒ½å¸å¼•æˆ‘çš„å…´è¶£ï¼Œåœ¨è¿™ä¸€è¡Œå¹²å¾—è¶Šä¹…ï¼Œè¶Šèƒ½ä½“ä¼šåˆ°è‹¹æœæä¾›çš„ Foudationï¼ŒUIKit ç­‰ç³»ç»Ÿæ¡†æ¶çš„å¼ºå¤§ï¼Œå®ƒèƒ½ä½¿ä¸€ååˆå­¦è€…å‡ ä¹æ¯«ä¸è´¹åŠ›åœ°ç‹¬ç«‹å®Œæˆä¸€ä¸ª Appï¼Œè­¬å¦‚å‡ å¤©å‰åœ¨ 2017 WWDC è‹¹æœå¼€å‘è€…å¤§ä¼šä¸Š è‹¹æœå…¬å¸CEO åº“å…‹å£°ç§°æœ€å¹´è½»çš„ iOS ä»…ä»…10å²ï¼Œå´æœ‰5æ¬¾ä½œå“ä¸Šæ¶ App Storeã€‚é‚£ä¹ˆ iOS ç³»ç»Ÿåº•å±‚ç©¶ç«Ÿæ˜¯æ€æ ·çš„å‘¢ï¼Ÿç§»åŠ¨äº’è”ç½‘å·¨å¤´å¾®ä¿¡çš„æ¡†æ¶ä½“ç³»åˆæ˜¯æ€æ ·ä½¿ä»–æ”¯æŒ5äº¿ç”¨æˆ·çš„å‘¢ï¼Ÿæ€€ç€å¼ºçƒˆçš„å¥½å¥‡å¿ƒï¼Œæœ¬äººåœ¨ä¸šä½™æ—¶é—´å­¦ä¹ äº†iOSé€†å‘çš„åŸºæœ¬æŠ€å·§ï¼Œæ‰¿è®¤æ‰“é“ï¼ŒæŠŠç©äº†ä¸‹å¾®ä¿¡æŠ¢çº¢åŒ…ã€‚</p>
</blockquote>
<p><strong>ä»»åŠ¡åˆ†è§£</strong></p>
<ul>
<li>ç›‘å¬åˆ°æ–°æ¶ˆæ¯</li>
<li>åˆ¤æ–­æ˜¯çº¢åŒ…</li>
<li>ç‚¹å‡»çº¢åŒ…</li>
<li>é¢†å–çº¢åŒ…</li>
</ul>
<blockquote>
<p>å¼€å§‹</p>
</blockquote>
<h1 id="å¸¸ç”¨å·¥å…·"><a href="#å¸¸ç”¨å·¥å…·" class="headerlink" title="å¸¸ç”¨å·¥å…·"></a>å¸¸ç”¨å·¥å…·</h1><ul>
<li>Reveal</li>
<li>Cycript</li>
<li>Hopper Disassembler v4</li>
<li>LLDB</li>
<li>debugserver</li>
<li>dumpdecrypted</li>
<li>dyld_decache</li>
</ul>
<h1 id="ç›‘å¬åˆ°æ–°æ¶ˆæ¯"><a href="#ç›‘å¬åˆ°æ–°æ¶ˆæ¯" class="headerlink" title="ç›‘å¬åˆ°æ–°æ¶ˆæ¯"></a>ç›‘å¬åˆ°æ–°æ¶ˆæ¯</h1><p><img src="http://wx2.sinaimg.cn/mw690/bd582863gy1fgndss9kokj208w05kt9l.jpg" alt="reveal"></p>
<p>é€šè¿‡ cycript æ‰¾åˆ°å¯¹åº” <em>WCPayC2CMessageCellView</em> çš„ è§†å›¾æ§åˆ¶å™¨ ï¼ˆå¾®ä¿¡çš„è®¾è®¡å¿…ç„¶ç¬¦åˆè‹¹æœæå€¡çš„MVCæ¶æ„ï¼‰</p>
<p><img src="http://wx1.sinaimg.cn/mw690/bd582863gy1fgndz4dmzsj212m058tai.jpg" alt="cycript"> </p>
<p>class dump å‡ºå¾®ä¿¡æ‰€æœ‰çš„å¤´æ–‡ä»¶åï¼Œ </p>
<p><img src="http://wx1.sinaimg.cn/mw690/bd582863gy1fgne7vvxurj205o0amjru.jpg" alt="class dump"> </p>
<p>æ‰¾åˆ° <em>BaseMsgContentViewController</em>ï¼Œ<br>æœç´¢ <em>protocol</em>, <em>msg</em>ï¼Œ<em>content</em>ï¼Œ<em>delegate</em> ç­‰å…³é”®è¯ï¼Œå‘ç°</p>
<p><code>@property(nonatomic) __weak id &lt;BaseMsgContentDelgate&gt; m_delegate; // @synthesize m_delegate;</code></p>
<p>å†æ¬¡é€šè¿‡ cycript æŸ¥çœ‹è¯¥å±æ€§</p>
<p><img src="http://wx1.sinaimg.cn/mw690/bd582863gy1fgnebxsfyxj20fo00xdfr.jpg" alt="cycript"> </p>
<p>æ‰“å¼€ <em>WeixinContentLogicController</em> å¤´æ–‡ä»¶ï¼Œ<br>å°è¯•äº†å‡ ä¸ªå®¹æ˜“è¢«æ€€ç–‘çš„æ–¹æ³•è¯¸å¦‚</p>
<p><code>- (void)AddMsg:(id)arg1 MsgWrap:(id)arg2;</code></p>
<p>æ•ˆæœå‡ä¸ç†æƒ³ã€‚<br>è®©æˆ‘ä»¬æ¢ä¸ªè§’åº¦æ€è€ƒï¼ŒæŸ¥çœ‹å®ƒçš„çˆ¶ç±» <em>BaseMsgContentLogicController</em></p>
<p><img src="http://wx4.sinaimg.cn/mw690/bd582863gy1fgnepb013mj203c03cq34.jpg" alt=""></p>
<p>å‡ æ¬¡å°è¯•åæ‰¾åˆ°ä¸‹é¢æ–¹æ³•</p>
<p><code>- (void)modMsgWithoutNotify:(id)arg1;</code></p>
<p>é€šè¿‡ Hooper Disassembler æŸ¥çœ‹å…¶å†…å­˜ä»£ç </p>
<p><img src="http://wx4.sinaimg.cn/mw690/bd582863gy1fgnev3df5tj20jn0263zw.jpg" alt="hooper"></p>
<p>è¯·å‡º lldb é™„åŠ  debugserver ä½œè¿›ä¸€æ­¥åˆ†æï¼š</p>
<p><img src="http://wx3.sinaimg.cn/mw690/bd582863gy1fgnext93fpj213g0a640d.jpg" alt="lldb"></p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†å…³é”®ç±» <em>CMessageMgr</em>ï¼Œ ä»¥åŠä¹‹åè¦ç”¨åˆ°çš„æ¶ˆæ¯ç»“æ„ä½“ <em>CMessageWrap</em></p>
<p>æŸ¥çœ‹ <strong>CMessageMgr</strong> å¤´æ–‡ä»¶ï¼Œåï¼ˆæŒºï¼‰å¤ï¼ˆæ˜ï¼‰å°ï¼ˆæ˜¾ï¼‰è¯•ï¼ˆçš„ï¼‰ï¼Œæ‰¾åˆ°æˆ‘ä»¬éœ€è¦ hook çš„å‡½æ•°</p>
<p><strong><code>- (void)AsyncOnAddMsg:(id)arg1 MsgWrap:(id)arg2;</code></strong></p>
<hr>
<h1 id="åˆ¤æ–­æ˜¯çº¢åŒ…"><a href="#åˆ¤æ–­æ˜¯çº¢åŒ…" class="headerlink" title="åˆ¤æ–­æ˜¯çº¢åŒ…"></a>åˆ¤æ–­æ˜¯çº¢åŒ…</h1><p>è¶çƒ­æ‰“é“ï¼ŒæŸ¥çœ‹ <strong>CMessageWrap</strong> å¤´æ–‡ä»¶ï¼Œå‘ç°å¯ç–‘å±æ€§2æšï¼Œ</p>
<p><strong><code>@property(nonatomic) unsigned long m_uiMessageType; // @synthesize m_uiMessageType;</code></strong></p>
<p><strong><code>@property(retain, nonatomic) NSString *m_nsContent; // @synthesize m_nsContent;</code></strong></p>
<p>lldb+debugserver è°ƒè¯•<br>å‘ç° type ä¸º49ï¼Œ content ä¸­åŒ…å«wxpay://<br>æ­¤å¤„çœç•¥100å­—ï¼Œæœ‰å›¾æœ‰çœŸç›¸</p>
<p><img src="http://wx1.sinaimg.cn/mw690/bd582863gy1fgnf73knxij213k0fegqb.jpg" alt="çº¢åŒ…æ¶ˆæ¯"></p>
<hr>
<h1 id="ç‚¹å‡»çº¢åŒ…"><a href="#ç‚¹å‡»çº¢åŒ…" class="headerlink" title="ç‚¹å‡»çº¢åŒ…"></a>ç‚¹å‡»çº¢åŒ…</h1><p>é¦–å…ˆ é€šè¿‡ reveal å®šä½åˆ° <em>WCPayC2CMessageCellView</em> ï¼ˆå›¾ç‰‡è§ä¸Šæ–¹ï¼‰<br>æŸ¥çœ‹å¤´æ–‡ä»¶ï¼Œç„¶å¹¶åµï¼ŒæŸ¥çœ‹å…¶çˆ¶ç±» <em>WCPayBaseMessageCellView</em><br>æ‰¾åˆ° </p>
<p><code>- (void)onTouchUpInside;</code></p>
<p>hooper é™æ€åˆ†æ </p>
<p><code>[BaseMsgContentViewController tapAppNodeView:]</code></p>
<p>åå¤é˜…è¯»å…¶æ±‡ç¼–ä»£ç å ä»”ç»†åˆ†æåæ‰¾åˆ°å¯ç–‘å‡½æ•°</p>
<p><img src="http://wx3.sinaimg.cn/mw690/bd582863gy1fgnfhyrb8qj210c0i00zu.jpg" alt="startReceiveRedEnvelopesLogic:Data:"></p>
<p>ç»§ç»­åˆ†æ</p>
<p><img src="http://wx2.sinaimg.cn/mw690/bd582863gy1fgnfjpy75pj215o0f6n8z.jpg" alt="WCRedEnvelopesReceiveControlLogic"></p>
<p>æŸ¥çœ‹ <em>WCRedEnvelopesReceiveControlLogic</em> å¤´æ–‡ä»¶ï¼Œ<br>åå¤å°è¯•ï¼ˆæ­¤å¤„çœç•¥500å­—ã€‚ã€‚ã€‚ï¼‰åå‘ç°</p>
<p><code>- (void)OnReceiverQueryRedEnvelopesRequest:(id)arg1 Error:(id)arg2;</code></p>
<p>hooper åˆ†æï¼Œ<br>è¯¥æ–¹æ³•æ¯”è¾ƒå¤æ‚ï¼Œä»”ç»†æ’æŸ¥åï¼ŒæŠŠæ³¨æ„åŠ›æ”¾åˆ°å·¦è¾¹ï¼Œ</p>
<p><img src="http://wx1.sinaimg.cn/mw690/bd582863gy1fgnfqzqda3j20nk0nrwn0.jpg" alt="WCRedEnvelopesReceiveControlLogic"></p>
<p>é€šè¿‡ <em>WCBizUti</em> è§£æ <em>nativeUrl</em>ï¼Œè·å–å…³é”®ä¿¡æ¯ï¼Œå¦‚<br><em>msgType</em>, <em>sendId</em>, <em>channelId</em>, <em>nativeUrl</em><br>å°è£…åœ¨ä¸€ä¸ªå­—å…¸ç»“æ„ä½“ä¸­ï¼Œæœ€åè°ƒç”¨ <em>QueryRedEnvelopesDetailRequest</em></p>
<p><img src="http://wx1.sinaimg.cn/mw690/bd582863gy1fgnftxht3bj20zy0gkapo.jpg" alt="WCRedEnvelopesReceiveControlLogic"></p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å¾—åˆ°å…³é”®ç±» <strong>WCRedEnvelopesLogicMgr</strong> ä»¥åŠå…³é”®å‡½æ•°<br><strong><code>- (void)QueryRedEnvelopesDetailRequest:(id)arg1;</code></strong></p>
<hr>
<h1 id="é¢†å–çº¢åŒ…"><a href="#é¢†å–çº¢åŒ…" class="headerlink" title="é¢†å–çº¢åŒ…"></a>é¢†å–çº¢åŒ…</h1><p>è€å¥—è·¯ï¼Œ reveal æ‰“å¤´é˜µ</p>
<p><img src="http://wx4.sinaimg.cn/mw690/bd582863gy1fgnfwb3m0jj208w05ewf9.jpg" alt="WCRedEnvelopesReceiveHomeView"></p>
<p>æŸ¥çœ‹ WCRedEnvelopesReceiveHomeView å¤´æ–‡ä»¶ï¼Œ<br>å‘ç°</p>
<p><code>id &lt;WCRedEnvelopesReceiveHomeViewDelegate&gt; m_delegate;</code></p>
<p>åŒä¸Šæ–‡æ‰€è¿°ï¼Œå®šä½åˆ° WCRedEnvelopesReceiveControlLogicï¼Œ<br>å°è¯•</p>
<p><code>- (void)WCRedEnvelopesReceiveHomeViewOpenRedEnvelopes;</code></p>
<p>hooper è·Ÿè¿›<br>å’Œæ‰“å¼€çº¢åŒ…å¾ˆåƒï¼Œä¹Ÿæ˜¯ç”± <em>WCBizUti</em> è§£æ <em>nativeUrl</em>, å–å…³é”®ä¿¡æ¯å¦‚<br><em>msgType</em>, <em>sendId</em>, <em>channelId</em>, <em>nickName</em>, <em>headImg</em>, <em>nativeUrl</em>, <em>sessionUserName</em>, <em>timingIdentifier</em><br>, å†æŠŠä»–ä»¬å°è£…ä¸€ä¸ªå­—å…¸ç»“æ„ä½“ä¸­<br>æœ€åè°ƒç”¨ <em>checkHongbaoOpenLicense:acceptCallback:denyCallback:</em></p>
<p><img src="http://wx3.sinaimg.cn/mw690/bd582863gy1fgnghlhdn9j20qs065abw.jpg" alt="checkHongbaoOpenLicense:acceptCallback:denyCallback:"></p>
<p>ç”±äºè¯¥æ–¹æ³•çš„å‚æ•°ç›´æ¥ä»å†…å­˜ä¸­è¯»å–çš„ï¼Œæ— æ³•é™æ€åˆ†æï¼Œä¸‹é¢è¿˜æ˜¯è¯·å‡ºæˆ‘ä»¬çš„ç»ˆææ­¦å™¨ lldb</p>
<p><img src="http://wx3.sinaimg.cn/mw690/bd582863gy1fgngaq3vxhj20xq0abjt9.jpg" alt="lldb"></p>
<p>hooper è·³è½¬åœ°å€ <em>0x140CA91</em> (0x014d7a91 å‡å» 0x000cb000ï¼ˆåŸºåœ°å€))</p>
<p><img src="http://wx2.sinaimg.cn/mw690/bd582863gy1fgng9en2ksj20j30e4q85.jpg" alt="checkHongbaoOpenLicense:acceptCallback:denyCallback:"></p>
<p>æˆ‘ä»¬å¾—åˆ°äº†å…³é”®ç±» <strong>WCRedEnvelopesLogicMgr</strong> å’Œ hookçš„å‡½æ•° <strong><code>- (void)OpenRedEnvelopesRequest:(id)arg1;</code></strong></p>
<p>PS: ä¸€å¼ å›¾çœ‹æ‡‚ block çš„ç»“æ„ä½“ </p>
<p><img src="http://wx2.sinaimg.cn/mw690/bd582863gy1fgngcgfa3ej20j808q75t.jpg" alt="block"></p>
<hr>
<h1 id="å®Œæˆ"><a href="#å®Œæˆ" class="headerlink" title="å®Œæˆ"></a>å®Œæˆ</h1><p><img src="http://wx2.sinaimg.cn/mw690/bd582863gy1fgnjbee5vug20a006o1kx.gif" alt="lldb"> </p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å¾®ä¿¡ä½œä¸ºå›½å†…å³æ—¶é€šè®¯çš„å·¨å¤´ï¼Œå…¶å¹³å°å¼ºå¤§ï¼Œç»“æ„å¤æ‚ï¼Œä»£ç é‡å¤§ï¼Œå®ƒçš„è®¾è®¡ç›¸å½“è€ƒç©¶ï¼Œæ¨¡å—åˆ’åˆ†ååˆ†æ¸…æ™°ï¼Œ<br>ä»…ä»…æ˜¯æµè§ˆä»–çš„å¤´æ–‡ä»¶å°±èƒ½ç»™æˆ‘ä»¬å¾ˆå¤šå¯ç¤ºï¼Œå¯¹äºæœ‰æ„æ¶‰è¶³å³æ—¶é€šè®¯çš„å¼€å‘è€…ï¼Œç›¸å½“å€¼å¾—å€Ÿé‰´ã€‚</p>
<h1 id="Preference"><a href="#Preference" class="headerlink" title="Preference"></a>Preference</h1><p><a href="https://item.jd.com/11670145.html" target="_blank" rel="external">iOSåº”ç”¨é€†å‘å·¥ç¨‹</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://wx3.sinaimg.cn/mw690/bd582863gy1fgndjkz8l8j20bo08sglu.jpg&quot; alt=&quot;å¾®ä¿¡çº¢åŒ…&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½œä¸ºä¸€æš iOS ç¨‹åºçŒ¿ï¼Œå¹³å¸¸çš„ App å·²è¶Šæ¥è¶Šä¸èƒ½å¸å¼•
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>åˆ†æä¸€ä¸ªå¥‡æ€ªçš„ç¨‹åº</title>
    <link href="blog.polarbearmaster.com/2017/04/19/%E5%88%86%E6%9E%90%E4%B8%80%E4%B8%AA%E5%A5%87%E6%80%AA%E7%9A%84%E7%A8%8B%E5%BA%8F/"/>
    <id>blog.polarbearmaster.com/2017/04/19/åˆ†æä¸€ä¸ªå¥‡æ€ªçš„ç¨‹åº/</id>
    <published>2017-04-19T15:27:06.000Z</published>
    <updated>2017-04-20T14:47:59.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>åˆ†æä¸‹é¢çš„ç¨‹åºï¼Œæ€è€ƒï¼šè¿™ä¸ªç¨‹åºå¯ä»¥æ­£ç¡®è¿”å›å—ï¼Ÿ</p>
</blockquote>
<pre><code>assume cs:code
code segment

        mov    ax,4c00h
        int 21h

start:    mov ax,0
    s:    nop
        nop

        mov di,offset s
        mov si,offset s2
        mov ax,cs:[si]
        mov cs:[di],ax

   s0:    jmp short s

   s1:    mov ax,0
        int 21h
        mov ax,0

   s2:    jmp short s1
        nop

code ends
end start
</code></pre><h2 id="æŸ¥çœ‹CPUæŒ‡ä»¤"><a href="#æŸ¥çœ‹CPUæŒ‡ä»¤" class="headerlink" title="æŸ¥çœ‹CPUæŒ‡ä»¤"></a>æŸ¥çœ‹CPUæŒ‡ä»¤</h2><p><img src="http://wx2.sinaimg.cn/mw690/bd582863gy1fetilmteo5j20w00skwor.jpg" alt="image"></p>
<p><img src="http://wx1.sinaimg.cn/mw690/bd582863gy1fetio409nnj21kw04lwgc.jpg" alt="image"></p>
<p>##æŒ‡ä»¤æ‰§è¡Œé¡ºåº</p>
<ol>
<li><em>ipï¼5</em>ï¼Œæ‰§è¡Œä»£ç ä¸­çš„     <code>mov ax,0</code></li>
<li>æŒ‰<em>-t</em> ä¸€ç›´æ‰§è¡Œåˆ°<em>0014</em>     <code>mov cs:[di],ax</code></li>
<li>æ‰§è¡ŒæŒ‡ä»¤<em>0016</em>        <code>jmp short s (jmp 0008)</code></li>
<li>æ‰§è¡ŒæŒ‡ä»¤                <code>jmp 0000</code></li>
<li>æ‰§è¡ŒæŒ‡ä»¤<em>0000</em>            <code>mov ax,4c00h</code></li>
<li>æ‰§è¡ŒæŒ‡ä»¤<em>0003</em>            <code>int 21h</code></li>
</ol>
<p><img src="http://wx3.sinaimg.cn/mw690/bd582863gy1fetie4laxhj20zr0mgtbm.jpg" alt="image"></p>
<p>#ç»“è®ºï¼šç¨‹åºå¯ä»¥æ­£å¸¸é€€å‡º</p>
<h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><pre><code>mov di,offset s
mov si,offset s2
mov ax,cs:[si]
mov cs:[di],ax
</code></pre><p><strong>è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯å°†æŒ‡ä»¤ s2 å¯¹åº”çš„æŒ‡ä»¤å½“ä½œæ•°æ®å­˜å‚¨ ä½äºæŒ‡ä»¤ s1 å¯¹åº”çš„åœ°å€å¤„</strong></p>
<p>æŒ‡ä»¤s2 å¯¹åº”çš„æœºå™¨ä»£ç ä¸º <em>EBF6</em><br>å…¶ä¸­ <strong>EB</strong> ä»£è¡¨ç§»åŠ¨ï¼Œ <strong>F6</strong> ä»£è¡¨ä½ç§»ã€‚</p>
<p><strong>æ‰§è¡Œå®Œè¿™æ¡æŒ‡ä»¤åï¼Œæˆ‘ä»¬æŸ¥çœ‹æŒ‡ä»¤ï¼ˆæŒ‰<code>-u cs:0</code>ï¼‰ å‘ç°åŸæœ¬æŒ‡ä»¤0C8D:<em>0008</em> å¤„çš„<em>90</em>ï¼ˆNOPï¼‰æˆä¸ºäº† <em>EBF6</em> (<code>jmp 0000</code>)</strong></p>
<p><img src="http://wx4.sinaimg.cn/mw690/bd582863gy1fetiqacjqij20mr0egabg.jpg" alt="image"></p>
<hr>
<h3 id="è½¬ç§»æŒ‡ä»¤çš„ä½œç”¨"><a href="#è½¬ç§»æŒ‡ä»¤çš„ä½œç”¨" class="headerlink" title="è½¬ç§»æŒ‡ä»¤çš„ä½œç”¨"></a>è½¬ç§»æŒ‡ä»¤çš„ä½œç”¨</h3><blockquote>
<ol>
<li>ä» CS:IP æŒ‡å‘å†…å­˜å•å…ƒè¯»å–æŒ‡ä»¤ï¼Œè¯»å–çš„æŒ‡ä»¤è¿›å…¥æŒ‡ä»¤ç¼“å­˜å™¨;</li>
<li>(IP)=(IP)+æ‰€è¯»å–æŒ‡ä»¤çš„é•¿åº¦ï¼Œä»è€ŒæŒ‡å‘ä¸‹ä¸€æ¡æŒ‡ä»¤;</li>
<li>æ‰§è¡ŒæŒ‡ä»¤ã€‚è½¬åˆ° 1ï¼Œ é‡å¤è¿™ä¸ªè¿‡ç¨‹</li>
</ol>
</blockquote>
<p>F6æ˜¯è´Ÿå€¼</p>
<p><code>Not(F6=11110110) + 1 = 1010b = 10</code></p>
<p><strong>å³ipå‘å‰ç§»åŠ¨10ä¸ªå­—èŠ‚</strong></p>
<p>å®é™…ä¸Šè¯»å–æŒ‡ä»¤ <code>s2: jmp short s1</code> åˆ°ç¼“å­˜å</p>
<p>ip = <em>0022</em></p>
<p>ä¹‹å CPU ä»ç¼“å­˜ä¸­è¯»å–s2æŒ‡ä»¤ï¼Œè·³è½¬åˆ°s1ï¼š<em>0018</em>å¤„</p>
<p>åŒæ ·å¯ä»¥å¾—åˆ° <strong>ipå‘å‰ç§»åŠ¨10ä¸ªå­—èŠ‚</strong> </p>
<p><code>22h-18h = 0ah = 10</code></p>
<hr>
<p>æ¥ä¸‹æ¥ CPU æ‰§è¡ŒæŒ‡ä»¤ <code>0016 s0:jmp short s</code></p>
<p>å†è·³è½¬åˆ°æŒ‡ä»¤så¤„</p>
<p>åŒä¸Šï¼ŒCPU è¯»å–æŒ‡ä»¤ â€œipå‘å‰ç§»åŠ¨10ä½â€ åˆ°ç¼“å­˜ä¸­,</p>
<p>ç”±äºè¯¥æŒ‡ä»¤å­˜æ”¾åœ¨16ä½å¯„å­˜å™¨axä¸­ï¼Œ<strong>é•¿åº¦ä¸º2ä¸ªå­—èŠ‚</strong> </p>
<p>æ¥ç€ipæŒ‡å‘åœ°å€ï¼š<strong>000A</strong>ï¼Œ</p>
<p>æ¥ä¸‹æ¥cpuä»ç¼“å­˜ä¸­è¯»å–æŒ‡ä»¤å¹¶æ‰§è¡Œï¼Œå³<br><code>0ah ï¼ 10 ï¼ 0</code></p>
<p>æ‰€ä»¥ipï¼0ï¼Œæ¥ç€æ‰§è¡Œ<br><code>mov axï¼Œ4c00h;
 int 21h;</code></p>
<p>#ç¨‹åºæ­£å¸¸é€€å‡ºï¼ï¼ï¼</p>
<p><img src="http://wx2.sinaimg.cn/mw690/bd582863gy1fetitjlcpyj20go0ciwhd.jpg" alt="image"></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;åˆ†æä¸‹é¢çš„ç¨‹åºï¼Œæ€è€ƒï¼šè¿™ä¸ªç¨‹åºå¯ä»¥æ­£ç¡®è¿”å›å—ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code&gt;assume cs:code
code segment

        mov    ax,4c00h
        int 21h

s
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>æ—‹è½¬æ£‹ç›˜</title>
    <link href="blog.polarbearmaster.com/2016/05/17/%E9%A2%98%E7%9B%AE%E4%BA%8C/"/>
    <id>blog.polarbearmaster.com/2016/05/17/é¢˜ç›®äºŒ/</id>
    <published>2016-05-17T14:50:20.000Z</published>
    <updated>2016-05-22T03:42:26.000Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a>
<p>Thereâ€™re 9 numbers in a 3 x 3 plane. We could only clockwise or counterclockwise rotate the four tiles around one of the four points, I II III and IV. R1, R2, R3, R4 and r1, r2, r3, r4 are corresponding to the 8 kinds of rotation, where we mark clockwise rotations as r and counterclockwise rotations as R. For example, starting from configuration (S), by the rotation sequence r1R4r2R3 we reach the configuration (E). Now, starting from configuration (S), find the shortest way to reach configuration (T).  </p>
<p><img src="http://ww3.sinaimg.cn/mw690/bd582863gw1f3ys2yosrcj211q0eeq54.jpg" alt="Image">  </p>
<h1 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="#æ•°æ®ç»“æ„"></a>#æ•°æ®ç»“æ„</h1><p>å®šä¹‰Step</p>
<pre><code>typedef struct
{
    int r;//region
    int c;//clockwise
}Step;
</code></pre><p>å®šä¹‰é“¾å¼æ ˆ</p>
<pre><code>typedef struct {
    int di;//è·ç¦» dis
    Step step;//ä¸€æ­¥
    int **pt;//èµ°å®Œè¿™ä¸€æ­¥åçš„3*3è¡¨æ ¼æ•°æ®
}ElementType;

typedef struct node {
    ElementType data;
    struct node *next;
}StackNode, *LinkStack;

void InitStack(LinkStack top) {
    top-&gt;next = NULL;
}

int IsEmpty(LinkStack top) {
    if(top-&gt;next == NULL) return TRUE;
    return FALSE;
}

int Push(LinkStack top, ElementType element) {
    ...//çœç•¥
}

int Pop(LinkStack top, ElementType *element) {
    ...//çœç•¥
}

void GetTop(LinkStack top, ElementType *element) {
       ...//çœç•¥
}

BOOL StackLoopEnd(LinkStack S) {
    ...//çœç•¥
}
</code></pre><h1 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="#æ€è·¯"></a>#æ€è·¯</h1><p>æ¯æ¬¡æ“ä½œä¹‹åä½¿å¾—äºŒç»„æ•°ç»„çš„â€™å·®è·â€™è¶Šæ¥è¶Šå°ï¼Œæ‰€ä»¥æ¯ä¸€æ¬¡æ“ä½œåº”è¯¥æ˜¯å½“å‰æ‰€æœ‰å¯èƒ½æ“ä½œä¸‹çš„æœ€ä¼˜é€‰æ‹©ï¼Œå¹¶è®°å½•è¿™æ­¥æ“ä½œï¼ˆå…¥æ ˆï¼‰ï¼Œå¦‚æœæ‰§è¡Œåˆ°æŸä¸€æ­¥ï¼Œæ¥ä¸‹æ¥çš„æœ€ä¼˜æ“ä½œä¹Ÿæ— æ³•ç¼©çŸ­â€™å·®è·â€™, åˆ™å›é€€åˆ°ä¸Šä¸€æ­¥ï¼Œå¹¶åˆ é™¤è¿™æ­¥æ“ä½œï¼ˆå‡ºæ ˆï¼‰ï¼Œå¹¶ä¸”æ ‡è®°è¿™æ—¶çš„æ£‹ç›˜çŠ¶æ€ä¸º1ï¼ˆè¡¨ç¤ºå·²ç»è¿‡ï¼‰ï¼Œä¾æ­¤ç±»æ¨ã€‚ã€‚ã€‚  </p>
<h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="#ä»£ç "></a>#ä»£ç </h1><p><a href="https://github.com/polarbearmaster/Liuliu2" target="_blank" rel="external">Githubä»£ç è¯·æˆ³æˆ‘</a>, <strong>ä½ çš„æ”¯æŒæ˜¯åŒ—æç†Šç»§ç»­å­¦ä¹ å¹¶åˆ†äº«çš„åŠ¨åŠ›!</strong></p>
<h1 id="å°¾å£°"><a href="#å°¾å£°" class="headerlink" title="#å°¾å£°"></a>#å°¾å£°</h1><p>è¿™æ˜¯åº”è˜é›é›iOSå¼€å‘çš„æ—¶å€™éœ€è¦åšçš„ä¸¤é“ç®—æ³•é¢˜ä¸­çš„ç¬¬äºŒé¢˜ã€‚è¿™ä¸€é¢˜èŠ±äº†æˆ‘å¾ˆå¤šæ—¶é—´ä¸ç²¾åŠ›ã€‚è‹¥æ²¡æœ‰ğŸ§åŒå­¦çš„æ”¯æŒä»¥åŠå°±èŒäºIBMçš„WillåŒå­¦çš„å¯å‘ï¼Œæˆ‘ä¹Ÿä¸å¯èƒ½å®Œæˆè¿™é¡¹ä»»åŠ¡ã€‚ä»£ç è¿‡ç¨‹ä¸­å‚è€ƒäº†ä¸¥è€å¸ˆçš„æ•°æ®ç»“æ„ä¸ç®—æ³•ã€‚<br>Referenceï¼š<a href="http://www.liuliu.co/job-dev" target="_blank" rel="external">http://www.liuliu.co/job-dev</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;Thereâ€™re 9 numbers in a 3 x 3 plane. We could only clockwise or counterclockwise rotate the four tiles around one of th
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>BetağŸ¶ä¸‹æ£‹</title>
    <link href="blog.polarbearmaster.com/2016/05/16/%E9%A2%98%E7%9B%AE%E4%B8%80/"/>
    <id>blog.polarbearmaster.com/2016/05/16/é¢˜ç›®ä¸€/</id>
    <published>2016-05-16T15:33:18.000Z</published>
    <updated>2017-04-19T15:40:42.000Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a>
<p>æœºå™¨äººBetaGoç°å¤„äºä¸€ä¸ª 8x8 çš„æ£‹ç›˜ä¹‹ä¸­ï¼Œæ£‹ç›˜ä¸­æ•£è½ç€ä¸€äº›æ£‹å­ã€‚BetaGoå¯ä»¥æ¥æ”¶ä»¥ä¸‹å‡ ç§å‘½ä»¤ï¼š  </p>
<pre><code>1. move n 
å‘å‰èµ°næ­¥ 
2. turn left 
å‘å·¦è½¬ 
3. turn right 
å‘å³è½¬ 
4. turn back 
å‘åè½¬ 
</code></pre><p>BetaGoåœ¨æ¯æ¬¡ç§»åŠ¨ä¹‹å‰ï¼Œéƒ½ä¼šæ£€æŸ¥è¿™ä¸€æ­¥ä¼šä¸ä¼šèµ°å‡ºæ£‹ç›˜ã€‚å¦‚æœä¼šï¼ŒBetaGoåˆ™ç•™åœ¨åŸåœ°ï¼Œå³æ£‹ç›˜çš„è¾¹ç¼˜ã€‚<br>å¦‚æœBetaGoåœ¨ç§»åŠ¨çš„æ—¶å€™é¢å‰æœ‰æ£‹å­ï¼Œé‚£å¥¹ä¼šåœ¨ç§»åŠ¨çš„æ—¶å€™æŠŠè¿™ä¸ªæ£‹å­å’Œä¹‹åç›¸è¿çš„æ‰€æœ‰æ£‹å­éƒ½å¾€å‰æ¨ä¸€æ­¥ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æ£‹å­æ‰å‡ºæ£‹ç›˜ï¼Œä½†BetaGoä¸€ç‚¹ä¹Ÿä¸åœ¨ä¹ï¼<br>ç°åœ¨ç»™å‡ºæ£‹ç›˜çš„åˆå§‹çŠ¶æ€å’ŒBetaGoæ”¶åˆ°çš„æ‰€æœ‰å‘½ä»¤ï¼Œæ±‚å‡ºæ£‹ç›˜çš„æœ€ç»ˆçŠ¶æ€ã€‚<br>æ£‹ç›˜çš„åˆå§‹çŠ¶æ€ï¼š</p>
<pre><code>.....c..
.p..A..t
D..&gt;T.Pr
....aP.P
p.d.C...
.....p.R
........
........
</code></pre><p>ä»¥ä¸Šæ•°æ®å¯¹åº”çš„æ£‹ç›˜çŠ¶æ€å¦‚ä¸‹ï¼š<br><img src="http://ww2.sinaimg.cn/mw690/bd582863gw1f3xoj4e6i9j206d06edfz.jpg" alt=""></p>
<p>æ£‹ç›˜ä¸Šçš„å­—æ¯ä»£è¡¨æ£‹å­ï¼Œ &gt; (å¤§äºå·)è¡¨ç¤ºBetaGoé¢å‘æ£‹ç›˜å³è¾¹ï¼Œ &lt; ï¼ˆå°äºå·ï¼‰è¡¨ç¤ºBetaGoé¢å‘æ£‹ç›˜å·¦è¾¹ï¼Œ v ï¼ˆå­—æ¯vï¼‰è¡¨ç¤ºBetaGoé¢å‘æ£‹ç›˜ä¸‹è¾¹ï¼Œ ^ ï¼ˆé˜¶ä¹˜ç¬¦å·ï¼Œé”®ç›˜ä¸Šæ•°å­—6ä¸Šé¢çš„ç¬¦å·ï¼‰è¡¨ç¤ºBetaGoé¢å‘æ£‹ç›˜ä¸Šè¾¹ã€‚ . (ç‚¹) è¡¨ç¤ºæ£‹ç›˜ç©ºä½™çš„æ ¼å­<br>BetaGoæ”¶åˆ°çš„å‘½ä»¤ï¼š</p>
<pre><code>move 1
turn right
move 2
turn left
move 2
move 3
move 3
turn left
move 1
move 2
turn back
move 1
turn left
move 1
turn left
move 1
move 1
turn back
turn right
move 3
turn left
move 4
turn left
move 5
turn right
move 2
turn right
move 9
turn right
turn right
move 2
turn back
move 1
turn right
move 3
turn right
move 1
turn right
move 1
turn right
move 1
turn left
move 1
turn left
move 4
</code></pre><h1 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="#æ€è·¯"></a>#æ€è·¯</h1><p>æ¯”è¾ƒç›´æ¥çš„æƒ³æ³•æ˜¯:<br>å…ˆå†™ä¸€ä¸ªå‡½æ•°<strong>Move1</strong>ï¼Œå‚æ•°æ˜¯ä¸€ä¸ª8<em>8çš„æ•°ç»„ï¼Œ<br>è¿”å›å€¼ä¸ºvoidï¼Œè¿™ä¸ªå‡½æ•°è®¡ç®—äº†betaç‹—æœå‰èµ°ä¸€æ­¥ä¹‹åçš„æ£‹å±€çŠ¶æ€ã€‚å‡½æ•°ä¸­å¼•ç”¨äº†betaç‹—çš„ä½ç½® (posX, posY)<br>å…¶æ¬¡å†™ä¸€ä¸ªå‡½æ•°<em>*MoveN</em></em>, å‚æ•°æ˜¯ä¸€ä¸ª8ï¼Š8çš„æ•°ç»„å’Œæ­¥æ•°nï¼Œè®¡ç®—äº†betaç‹—æœå‰èµ°næ­¥åçš„æ£‹å±€çŠ¶æ€ </p>
<h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="#ä»£ç "></a>#ä»£ç </h1><p><a href="https://github.com/polarbearmaster/Liuliu1" target="_blank" rel="external">Githubä»£ç è¯·æˆ³æˆ‘</a>, <strong>ä½ çš„æ”¯æŒæ˜¯åŒ—æç†Šç»§ç»­å­¦ä¹ å¹¶åˆ†äº«çš„åŠ¨åŠ›!</strong></p>
<h1 id="å°¾å£°"><a href="#å°¾å£°" class="headerlink" title="#å°¾å£°"></a>#å°¾å£°</h1><p>è¿™æ˜¯åº”è˜é›é›iOSå¼€å‘çš„æ—¶å€™éœ€è¦åšçš„ä¸¤é“ç®—æ³•é¢˜ä¸­çš„ç¬¬ä¸€é¢˜ã€‚æˆ‘è¶æ­¤å¤ä¹ äº†ä¸€ä¸‹æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼Œæ‹¿å‡ºä¸¥è€å¸ˆçš„ä¹¦é‡æ–°æ¸©ä¹ äº†ä¸‹<br>Referenceï¼š<a href="http://www.liuliu.co/job-dev" target="_blank" rel="external">http://www.liuliu.co/job-dev</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;æœºå™¨äººBetaGoç°å¤„äºä¸€ä¸ª 8x8 çš„æ£‹ç›˜ä¹‹ä¸­ï¼Œæ£‹ç›˜ä¸­æ•£è½ç€ä¸€äº›æ£‹å­ã€‚BetaGoå¯ä»¥æ¥æ”¶ä»¥ä¸‹å‡ ç§å‘½ä»¤ï¼š  &lt;/p&gt;
&lt;pre&gt;&lt;code&gt;1. move n 
å‘å‰èµ°næ­¥ 
2. turn left 
å‘å·¦è½¬ 
3. turn rig
    
    </summary>
    
    
  </entry>
  
</feed>
